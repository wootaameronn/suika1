<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>TextAliveテスト</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/textalive-app-api/dist/index.js"></script>
</head>
<body>
  <div id="log" style="color:lime;font-size:24px;">クリックして開始</div>
  <script>
    const { Player } = TextAliveApp;
    const player = new Player({
      app: {
        token:"Ag3aTNKO99d7ET8S", 
        name: "テストアプリ"
      }
    });

    player.addListener({
      onAppReady: (app) => {
        if (!app.managed) {
          player.createFromSongUrl("https://piapro.jp/t/ULcJ/20250225120202", {
            video: {
              beatId: 4694275,
              chordId: 2830730,
              repetitiveSegmentId: 2946478
            }
          });
        }
      },
      onPlay: () => {
        document.getElementById("log").textContent = "再生開始！";
      }
    });

    document.addEventListener("click", () => {
      player.requestPlay();
    });
  </script>
</body>
</html>